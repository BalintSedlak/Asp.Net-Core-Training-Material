version: '3.4'
services:
 RabbitMQ:
  image: rabbitmq:management
  container_name: RabbitMQ
  hostname: pubsub-queue
  volumes:
   - ./.containers/RabbitMQ/data/:/var/lib/rabbitmq
   - ./.containers/RabbitMQ/log/:/var/log/rabbitmq
  ports:
   - 5672:5672
   - 15672:15672
  environment:
   RABBITMQ_DEFAULT_USER: guest
   RABBITMQ_DEFAULT_PASS: guest
 publisherApp:
  image: publisher
  container_name: publisher
  build:
   context: .
   dockerfile: ./docker/Publisher/Dockerfile
  environment:
   RabbitMQ__Host: "localhost"
   RabbitMQ__Port: "5672"
   RabbitMQ__Username: "guest"
   RabbitMQ__Password: "guest"
  ports:
   - "5000:8080"   
 subscriberApp:
  image: subscriber
  container_name: subscriber
  build:
   context: .
   dockerfile: ./docker/Subscriber/Dockerfile
  environment:
   RabbitMQ__Host: "localhost"
   RabbitMQ__Port: "5672"
   RabbitMQ__Username: "guest"
   RabbitMQ__Password: "guest"
  ports:
   - "5001:8080"   